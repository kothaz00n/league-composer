const PRECIOS_DATA = {
    "AMBA": {
        "nombre": "AMBA (Capital Federal y Gran Bs. As.)",
        "tipos": {
            "CON_IVA": {
                "nombre": "Directo Con I.V.A.",
                "planes": ["S1", "SMG02", "S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [160876, 225832, 201969, 281848, 323774, 338404, 422845, 595410, 724576],
                    "40": [193051, 270998, 242356, 338208, 388529, 406104, 507385, 714512, 869501],
                    "45": [202704, 284548, 254458, 355096, 407970, 426380, 532767, 750252, 912998],
                    "50": [222988, 313022, 279928, 390640, 448767, 469043, 586033, 825268, 1004264],
                    "55": [289856, 406890, 363903, 507827, 583382, 609746, 761838, 1072848, 1305553],
                    "60": [376834, 528986, 473067, 660165, 758402, 792669, 990419, 1394707, 1697224],
                    "99": [474584, 666204, 595809, 831451, 955133, 998292, 1247394, 1756460, 2137500],
                    "hijo1": [114676, 160979, 170729, 238252, 277184, 289654, 314544, 339484, 364375],
                    "hijoAdd": [83166, 116745, 122532, 170994, 198732, 207471, 224899, 242327, 259756]
                }
            },
            "DERIVACION": {
                "nombre": "Derivación Directa",
                "planes": ["S1", "SMG02", "S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [127841, 179459, 157993, 220479, 242911, 288646, 343536, 514069, 630305],
                    "40": [153410, 215351, 189585, 264565, 291484, 346375, 412253, 616891, 756384],
                    "45": [161074, 226110, 199066, 277796, 306042, 363680, 432854, 647747, 794199],
                    "50": [177184, 248725, 218979, 305584, 336669, 400075, 476162, 712527, 873582],
                    "55": [230343, 323347, 284689, 397283, 437661, 520066, 618997, 926276, 1135675],
                    "60": [299449, 420356, 370082, 516449, 568959, 676086, 804683, 1204163, 1476373],
                    "99": [377132, 529405, 466078, 650412, 716588, 851505, 1013432, 1516502, 1859400],
                    "hijo1": [94609, 132809, 125909, 175705, 204272, 213291, 231329, 249412, 267495],
                    "hijoAdd": [69204, 97146, 90938, 126903, 132626, 138303, 149702, 161056, 172455]
                }
            }
        }
    },
    "BSAS_SF": {
        "nombre": "Buenos Aires y Santa Fe (Interior de BsAs y Santa Fe)",
        "tipos": {
            "CON_IVA": {
                "nombre": "Directo Con I.V.A.",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [173684, 242376, 278460, 291028, 363638, 512049, 623148],
                    "40": [208407, 290832, 334133, 349254, 436346, 614459, 747798],
                    "45": [218856, 305413, 350874, 366682, 458193, 645191, 785158],
                    "50": [240738, 335949, 385927, 403355, 503998, 709701, 863659],
                    "55": [312963, 436739, 501739, 524371, 655207, 922621, 1122776],
                    "60": [406823, 567721, 652212, 681717, 851729, 1199412, 1459609],
                    "99": [512369, 715010, 821458, 858534, 1072733, 1510544, 1838288],
                    "hijo1": [146842, 204918, 238400, 249102, 270507, 291961, 313366],
                    "hijoAdd": [105400, 147085, 170896, 178407, 193381, 208403, 223377]
                }
            },
            "DERIVACION": {
                "nombre": "Derivación Directa",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [135882, 189623, 208896, 248222, 295421, 442102, 542040],
                    "40": [163045, 227529, 250648, 297893, 354524, 530550, 650494],
                    "45": [171213, 238928, 263192, 312772, 372241, 557056, 682998],
                    "50": [188338, 262826, 289516, 344040, 409506, 612771, 751303],
                    "55": [244830, 341659, 376361, 447275, 532335, 796625, 976680],
                    "60": [318249, 444116, 489301, 581457, 692017, 1035599, 1269675],
                    "99": [400851, 559387, 616244, 732254, 871493, 1304200, 1599019],
                    "hijo1": [108292, 151121, 175660, 183442, 198962, 214481, 230047],
                    "hijoAdd": [78209, 109141, 114039, 118938, 128735, 138532, 148283]
                }
            }
        }
    },
    "CORDOBA": {
        "nombre": "Córdoba",
        "tipos": {
            "CON_IVA": {
                "nombre": "Directo Con I.V.A.",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [173684, 242376, 278460, 291028, 363638, 512049, 623148],
                    "40": [208407, 290832, 334133, 349254, 436346, 614459, 747798],
                    "45": [218856, 305413, 350874, 366682, 458193, 645191, 785158],
                    "50": [240738, 335949, 385927, 403355, 503998, 709701, 863659],
                    "55": [312963, 436739, 501739, 524371, 655207, 922621, 1122776],
                    "60": [406823, 567721, 652212, 681717, 851729, 1199412, 1459609],
                    "99": [512369, 715010, 821458, 858534, 1072733, 1510544, 1838288],
                    "hijo1": [146842, 204918, 238400, 249102, 270507, 291961, 313366],
                    "hijoAdd": [105400, 147085, 170896, 178407, 193381, 208403, 223377]
                }
            },
            "DERIVACION": {
                "nombre": "Derivación Directa",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [135882, 189623, 208896, 248222, 295421, 442102, 542040],
                    "40": [163045, 227529, 250648, 297893, 354524, 530550, 650494],
                    "45": [171213, 238928, 263192, 312772, 372241, 557056, 682998],
                    "50": [188338, 262826, 289516, 344040, 409506, 612771, 751303],
                    "55": [244830, 341659, 376361, 447275, 532335, 796625, 976680],
                    "60": [318249, 444116, 489301, 581457, 692017, 1035599, 1269675],
                    "99": [400851, 559387, 616244, 732254, 871493, 1304200, 1599019],
                    "hijo1": [108292, 151121, 175660, 183442, 198962, 214481, 230047],
                    "hijoAdd": [78209, 109141, 114039, 118938, 128735, 138532, 148283]
                }
            }
        }
    },
    "PATAGONIA_SALTA": {
        "nombre": "Patagonia y Salta (Río Negro, Neuquén, Chubut, Santa Cruz y Salta)",
        "tipos": {
            "CON_IVA": {
                "nombre": "Directo Con I.V.A.",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [201969, 281848, 323774, 338404, 422845, 595410, 724576],
                    "40": [242356, 338208, 388529, 406104, 507385, 714512, 869501],
                    "45": [254458, 355096, 407970, 426380, 532767, 750252, 912998],
                    "50": [279928, 390640, 448767, 469043, 586033, 825268, 1004264],
                    "55": [363903, 507827, 583382, 609746, 761838, 1072848, 1305553],
                    "60": [473067, 660165, 758402, 792669, 990419, 1394707, 1697224],
                    "99": [595809, 831451, 955133, 998292, 1247394, 1756460, 2137500],
                    "hijo1": [170729, 238252, 277184, 289654, 314544, 339484, 364375],
                    "hijoAdd": [122532, 170994, 198732, 207471, 224899, 242327, 259756]
                }
            },
            "DERIVACION": {
                "nombre": "Derivación Directa",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [157993, 220479, 242911, 288646, 343536, 514069, 630305],
                    "40": [189585, 264565, 291484, 346375, 412253, 616891, 756384],
                    "45": [199066, 277796, 306042, 363680, 432854, 647747, 794199],
                    "50": [218979, 305584, 336669, 400075, 476162, 712527, 873582],
                    "55": [284689, 397283, 437661, 520066, 618997, 926276, 1135675],
                    "60": [370082, 516449, 568959, 676086, 804683, 1204163, 1476373],
                    "99": [466078, 650412, 716588, 851505, 1013432, 1516502, 1859400],
                    "hijo1": [125909, 175705, 204272, 213291, 231329, 249412, 267495],
                    "hijoAdd": [90938, 126903, 132626, 138303, 149702, 161056, 172455]
                }
            }
        }
    },
    "TIERRA_DEL_FUEGO": {
        "nombre": "Tierra del Fuego",
        "tipos": {
            "CON_IVA": {
                "nombre": "Directo Con I.V.A.",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [201969, 281848, 323774, 338404, 422845, 595410, 724576],
                    "40": [242356, 338208, 388529, 406104, 507385, 714512, 869501],
                    "45": [254458, 355096, 407970, 426380, 532767, 750252, 912998],
                    "50": [279928, 390640, 448767, 469043, 586033, 825268, 1004264],
                    "55": [363903, 507827, 583382, 609746, 761838, 1072848, 1305553],
                    "60": [473067, 660165, 758402, 792669, 990419, 1394707, 1697224],
                    "99": [595809, 831451, 955133, 998292, 1247394, 1756460, 2137500],
                    "hijo1": [170729, 238252, 277184, 289654, 314544, 339484, 364375],
                    "hijoAdd": [122532, 170994, 198732, 207471, 224899, 242327, 259756]
                }
            },
            "DERIVACION": {
                "nombre": "Derivación Directa",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [157993, 220479, 242911, 288646, 343536, 514069, 630305],
                    "40": [189585, 264565, 291484, 346375, 412253, 616891, 756384],
                    "45": [199066, 277796, 306042, 363680, 432854, 647747, 794199],
                    "50": [218979, 305584, 336669, 400075, 476162, 712527, 873582],
                    "55": [284689, 397283, 437661, 520066, 618997, 926276, 1135675],
                    "60": [370082, 516449, 568959, 676086, 804683, 1204163, 1476373],
                    "99": [466078, 650412, 716588, 851505, 1013432, 1516502, 1859400],
                    "hijo1": [125909, 175705, 204272, 213291, 231329, 249412, 267495],
                    "hijoAdd": [90938, 126903, 132626, 138303, 149702, 161056, 172455]
                }
            }
        }
    },
    "INTERIOR": {
        "nombre": "Interior del País (La Pampa, Mendoza, San Juan, San Luis, La Rioja, Catamarca, Tucumán, Jujuy, Sgo. del Estero, Formosa, Chaco, Misiones, Corrientes, Entre Ríos)",
        "tipos": {
            "CON_IVA": {
                "nombre": "Directo Con I.V.A.",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [157537, 219842, 252539, 263978, 329813, 464428, 565168],
                    "40": [189023, 263781, 303056, 316754, 395746, 557313, 678232],
                    "45": [198486, 276988, 318226, 332611, 415530, 585199, 712106],
                    "50": [218328, 304676, 350039, 365847, 457113, 643719, 783342],
                    "55": [283833, 396089, 455051, 475621, 594232, 836805, 1018354],
                    "60": [368969, 514896, 591581, 618288, 772492, 1087871, 1323865],
                    "99": [464733, 648535, 744989, 778734, 972947, 1370062, 1667247],
                    "hijo1": [133192, 185869, 216209, 225930, 245371, 264812, 284204],
                    "hijoAdd": [95584, 133388, 154989, 161813, 175412, 189011, 202610]
                }
            },
            "DERIVACION": {
                "nombre": "Derivación Directa",
                "planes": ["S2", "SMG20", "SMG30", "SMG40", "SMG50", "SMG60", "SMG70"],
                "tarifas": {
                    "35": [123251, 171997, 189439, 225148, 267953, 400991, 491636],
                    "40": [147888, 206378, 227346, 270150, 321562, 481198, 589973],
                    "45": [155270, 216679, 238699, 283656, 337631, 505233, 619455],
                    "50": [170820, 238379, 262597, 312039, 371371, 555775, 681396],
                    "55": [222030, 309842, 341385, 405661, 482801, 722507, 885852],
                    "60": [288658, 402822, 443796, 527345, 627650, 939232, 1151561],
                    "99": [363591, 507392, 558846, 664187, 790461, 1182923, 1450327],
                    "hijo1": [98221, 137067, 159316, 166366, 180467, 194521, 208621],
                    "hijoAdd": [70959, 99023, 103418, 107859, 116740, 125622, 134503]
                }
            }
        }
    }
};

const CAMPAIGNS = {
    TRADICIONAL: "Traditional",
    PROMO_15: "Promo15",
    NORDELTA: "Nordelta",
    MONOTRIBUTO: "Monotributo"
};

const SUBACCOUNTS_DATA = {
    "AMBA": {
        [CAMPAIGNS.TRADICIONAL]: { smg: "0AMT", nubial: "3D14" },
        [CAMPAIGNS.PROMO_15]: { smg: "0GGN", nubial: "3AU6" },
        [CAMPAIGNS.NORDELTA]: { smg: "0HWU", nubial: "3B1O" },
        [CAMPAIGNS.MONOTRIBUTO]: { smg: "0ID1", nubial: "3B3J" }
    },
    "BSAS_SF": {
        [CAMPAIGNS.TRADICIONAL]: { smg: "0AMU" },
        [CAMPAIGNS.PROMO_15]: { smg: "0GGO" },
        [CAMPAIGNS.MONOTRIBUTO]: { smg: "0ID1" }
    },
    "CORDOBA": {
        [CAMPAIGNS.TRADICIONAL]: { smg: "0AMU" },
        [CAMPAIGNS.PROMO_15]: { smg: "0GGO" },
        [CAMPAIGNS.MONOTRIBUTO]: { smg: "0ID1" }
    },
    "PATAGONIA_SALTA": {
        [CAMPAIGNS.TRADICIONAL]: { smg: "0AMW" },
        [CAMPAIGNS.PROMO_15]: { smg: "0GGQ" },
        [CAMPAIGNS.MONOTRIBUTO]: { smg: "0ID1" }
    },
    "TIERRA_DEL_FUEGO": {
        [CAMPAIGNS.TRADICIONAL]: { smg: "0AMW" },
        [CAMPAIGNS.PROMO_15]: { smg: "0GGQ" },
        [CAMPAIGNS.MONOTRIBUTO]: { smg: "0ID1" }
    },
    "INTERIOR": {
        [CAMPAIGNS.TRADICIONAL]: { smg: "0AMX" },
        [CAMPAIGNS.PROMO_15]: { smg: "0GGR" },
        [CAMPAIGNS.MONOTRIBUTO]: { smg: "0ID1" }
    }
};

function getSubaccount(region, campaign, plan) {
    const regionData = SUBACCOUNTS_DATA[region];
    if (!regionData) return "N/A";

    const campaignData = regionData[campaign];
    if (!campaignData) return "N/A";

    if (region === "AMBA") {
        return (plan === "S1" || plan === "SMG02") ? campaignData.nubial : campaignData.smg;
    }

    return campaignData.smg || "N/A";
}


function getPrecio(region, tipo, plan, edad) {
    const dataRegion = PRECIOS_DATA[region];
    if (!dataRegion) return 0;

    const dataType = dataRegion.tipos[tipo];
    if (!dataType) return 0;

    const planIndex = dataType.planes.indexOf(plan);
    if (planIndex === -1) return 0;

    let edadKey = "";
    if (edad === "hijo1") edadKey = "hijo1";
    else if (edad === "hijoAdd") edadKey = "hijoAdd";
    else {
        const age = parseInt(edad);
        if (age <= 35) edadKey = "35";
        else if (age <= 40) edadKey = "40";
        else if (age <= 45) edadKey = "45";
        else if (age <= 50) edadKey = "50";
        else if (age <= 55) edadKey = "55";
        else if (age <= 60) edadKey = "60";
        else edadKey = "99";
    }

    const tarifas = dataType.tarifas[edadKey];
    return tarifas ? tarifas[planIndex] : 0;
}
